
;; Function producer (producer, funcdef_no=2, decl_uid=2722, cgraph_uid=2)

producer (void * arg1)
{
  int next_produced;
  union sem_t * full.14;
  union sem_t * mutex.13;
  int next_produced.12;
  int next_produced.11;
  int buf_end.10;
  int buf_end.9;
  int buf_end.8;
  int next_produced.7;
  int next_produced.6;
  int buf_begin.5;
  int buf_end.4;
  int buf_begin.3;
  union sem_t * mutex.2;
  union sem_t * empty.1;
  int next_produced.0;

;;   basic block 2, loop depth 0
;;    pred:       ENTRY
;;                5
  printf ("\nEnter an integer to add it to the buffer:   ");
  scanf ("%d", &next_produced);
  next_produced.0_1 = next_produced;
  printf ("%d is produced\n", next_produced.0_1);
  __builtin_puts (&"Waiting for empty buffer"[0]);
  empty.1_2 = empty;
  sem_wait (empty.1_2);
  mutex.2_3 = mutex;
  sem_wait (mutex.2_3);
  buf_begin.3_4 = buf_begin;
  buf_end.4_5 = buf_end;
  if (buf_begin.3_4 == buf_end.4_5)
    goto <bb 3>;
  else
    goto <bb 4>;
;;    succ:       3
;;                4

;;   basic block 3, loop depth 0
;;    pred:       2
  buf_begin = 0;
  buf_end = 1;
  buf_begin.5_6 = buf_begin;
  next_produced.6_7 = next_produced;
  buf[buf_begin.5_6] = next_produced.6_7;
  next_produced.7_8 = next_produced;
  printf ("%d is added to the buffer\n", next_produced.7_8);
  goto <bb 5>;
;;    succ:       5

;;   basic block 4, loop depth 0
;;    pred:       2
  buf_end.8_9 = buf_end;
  buf_end.9_10 = buf_end.8_9;
  buf_end.10_11 = buf_end.9_10 + 1;
  buf_end = buf_end.10_11;
  next_produced.11_12 = next_produced;
  buf[buf_end.9_10] = next_produced.11_12;
  next_produced.12_13 = next_produced;
  printf ("%d is added to the buffer\n", next_produced.12_13);
;;    succ:       5

;;   basic block 5, loop depth 0
;;    pred:       3
;;                4
  mutex.13_14 = mutex;
  sem_post (mutex.13_14);
  full.14_15 = full;
  sem_post (full.14_15);
  next_produced ={v} {CLOBBER};
  goto <bb 2>;
;;    succ:       2

}



Partition map 

Partition 1 (next_produced.0_1 - 1 )
Partition 2 (empty.1_2 - 2 )
Partition 3 (mutex.2_3 - 3 )
Partition 4 (buf_begin.3_4 - 4 )
Partition 5 (buf_end.4_5 - 5 )
Partition 6 (buf_begin.5_6 - 6 )
Partition 7 (next_produced.6_7 - 7 )
Partition 8 (next_produced.7_8 - 8 )
Partition 9 (buf_end.8_9 - 9 )
Partition 10 (buf_end.9_10 - 10 )
Partition 11 (buf_end.10_11 - 11 )
Partition 12 (next_produced.11_12 - 12 )
Partition 13 (next_produced.12_13 - 13 )
Partition 14 (mutex.13_14 - 14 )
Partition 15 (full.14_15 - 15 )

After Coalescing:

Partition map 

Partition 0 (next_produced.0_1 - 1 )
Partition 1 (empty.1_2 - 2 )
Partition 2 (mutex.2_3 - 3 )
Partition 3 (buf_begin.3_4 - 4 )
Partition 4 (buf_end.4_5 - 5 )
Partition 5 (buf_begin.5_6 - 6 )
Partition 6 (next_produced.6_7 - 7 )
Partition 7 (next_produced.7_8 - 8 )
Partition 8 (buf_end.8_9 - 9 )
Partition 9 (buf_end.9_10 - 10 )
Partition 10 (buf_end.10_11 - 11 )
Partition 11 (next_produced.11_12 - 12 )
Partition 12 (next_produced.12_13 - 13 )
Partition 13 (mutex.13_14 - 14 )
Partition 14 (full.14_15 - 15 )

producer (void * arg1)
{
  int next_produced;
  union sem_t * full.14;
  union sem_t * mutex.13;
  int next_produced.12;
  int next_produced.11;
  int buf_end.10;
  int buf_end.9;
  int buf_end.8;
  int next_produced.7;
  int next_produced.6;
  int buf_begin.5;
  int buf_end.4;
  int buf_begin.3;
  union sem_t * mutex.2;
  union sem_t * empty.1;
  int next_produced.0;

;;   basic block 2, loop depth 0
;;    pred:       ENTRY
;;                5
  printf ("\nEnter an integer to add it to the buffer:   ");
  scanf ("%d", &next_produced);
  next_produced.0_1 = next_produced;
  printf ("%d is produced\n", next_produced.0_1);
  __builtin_puts (&"Waiting for empty buffer"[0]);
  empty.1_2 = empty;
  sem_wait (empty.1_2);
  mutex.2_3 = mutex;
  sem_wait (mutex.2_3);
  buf_begin.3_4 = buf_begin;
  buf_end.4_5 = buf_end;
  if (buf_begin.3_4 == buf_end.4_5)
    goto <bb 3>;
  else
    goto <bb 4>;
;;    succ:       3
;;                4

;;   basic block 3, loop depth 0
;;    pred:       2
  buf_begin = 0;
  buf_end = 1;
  buf_begin.5_6 = buf_begin;
  next_produced.6_7 = next_produced;
  buf[buf_begin.5_6] = next_produced.6_7;
  next_produced.7_8 = next_produced;
  printf ("%d is added to the buffer\n", next_produced.7_8);
  goto <bb 5>;
;;    succ:       5

;;   basic block 4, loop depth 0
;;    pred:       2
  buf_end.8_9 = buf_end;
  buf_end.9_10 = buf_end.8_9;
  buf_end.10_11 = buf_end.9_10 + 1;
  buf_end = buf_end.10_11;
  next_produced.11_12 = next_produced;
  buf[buf_end.9_10] = next_produced.11_12;
  next_produced.12_13 = next_produced;
  printf ("%d is added to the buffer\n", next_produced.12_13);
;;    succ:       5

;;   basic block 5, loop depth 0
;;    pred:       3
;;                4
  mutex.13_14 = mutex;
  sem_post (mutex.13_14);
  full.14_15 = full;
  sem_post (full.14_15);
  next_produced ={v} {CLOBBER};
  goto <bb 2>;
;;    succ:       2

}


Partition 0: size 4 align 4
	next_produced

;; Generating RTL for gimple basic block 2

;; printf ("\nEnter an integer to add it to the buffer:   ");

(insn 6 5 7 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC0") [flags 0x2]  <var_decl 0x7fa5dd87c260 *.LC0>)) producer_consumer_problem-seamaphore.c:11 -1
     (nil))

(insn 7 6 8 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:11 -1
     (nil))

(call_insn 8 7 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:11 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (nil))))

;; scanf ("%d", &next_produced);

(insn 9 8 10 (parallel [
            (set (reg:DI 75)
                (plus:DI (reg/f:DI 54 virtual-stack-vars)
                    (const_int -4 [0xfffffffffffffffc])))
            (clobber (reg:CC 17 flags))
        ]) producer_consumer_problem-seamaphore.c:13 -1
     (nil))

(insn 10 9 11 (set (reg:DI 4 si)
        (reg:DI 75)) producer_consumer_problem-seamaphore.c:13 -1
     (nil))

(insn 11 10 12 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC1") [flags 0x2]  <var_decl 0x7fa5dd87c2f8 *.LC1>)) producer_consumer_problem-seamaphore.c:13 -1
     (nil))

(insn 12 11 13 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:13 -1
     (nil))

(call_insn 13 12 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("*__isoc99_scanf") [flags 0x41]  <function_decl 0x7fa5dd71cb00 scanf>) [0 __builtin_scanf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:13 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (nil)))))

;; next_produced.0_1 = next_produced;

(insn 14 13 0 (set (reg:SI 59 [ next_produced.0 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:14 -1
     (nil))

;; printf ("%d is produced\n", next_produced.0_1);

(insn 15 14 16 (set (reg:SI 4 si)
        (reg:SI 59 [ next_produced.0 ])) producer_consumer_problem-seamaphore.c:14 -1
     (nil))

(insn 16 15 17 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC2") [flags 0x2]  <var_decl 0x7fa5dd87c390 *.LC2>)) producer_consumer_problem-seamaphore.c:14 -1
     (nil))

(insn 17 16 18 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:14 -1
     (nil))

(call_insn 18 17 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:14 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))

;; __builtin_puts (&"Waiting for empty buffer"[0]);

(insn 19 18 20 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC3") [flags 0x2]  <var_decl 0x7fa5dd87c428 *.LC3>)) producer_consumer_problem-seamaphore.c:15 -1
     (nil))

(call_insn 20 19 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:15 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; empty.1_2 = empty;

(insn 21 20 0 (set (reg/f:DI 60 [ empty.1 ])
        (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])) producer_consumer_problem-seamaphore.c:16 -1
     (nil))

;; sem_wait (empty.1_2);

(insn 22 21 23 (set (reg:DI 5 di)
        (reg/f:DI 60 [ empty.1 ])) producer_consumer_problem-seamaphore.c:16 -1
     (nil))

(call_insn 23 22 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:16 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; mutex.2_3 = mutex;

(insn 24 23 0 (set (reg/f:DI 61 [ mutex.2 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:17 -1
     (nil))

;; sem_wait (mutex.2_3);

(insn 25 24 26 (set (reg:DI 5 di)
        (reg/f:DI 61 [ mutex.2 ])) producer_consumer_problem-seamaphore.c:17 -1
     (nil))

(call_insn 26 25 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:17 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; buf_begin.3_4 = buf_begin;

(insn 27 26 0 (set (reg:SI 62 [ buf_begin.3 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:18 -1
     (nil))

;; buf_end.4_5 = buf_end;

(insn 28 27 0 (set (reg:SI 63 [ buf_end.4 ])
        (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])) producer_consumer_problem-seamaphore.c:18 -1
     (nil))

;; if (buf_begin.3_4 == buf_end.4_5)

(insn 29 28 30 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 62 [ buf_begin.3 ])
            (reg:SI 63 [ buf_end.4 ]))) producer_consumer_problem-seamaphore.c:18 -1
     (nil))

(jump_insn 30 29 0 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 0)
            (pc))) producer_consumer_problem-seamaphore.c:18 -1
     (nil))

;; Generating RTL for gimple basic block 3

;; buf_begin = 0;

(insn 32 31 0 (set (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:19 -1
     (nil))

;; buf_end = 1;

(insn 33 32 0 (set (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:20 -1
     (nil))

;; buf_begin.5_6 = buf_begin;

(insn 34 33 0 (set (reg:SI 64 [ buf_begin.5 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:21 -1
     (nil))

;; next_produced.6_7 = next_produced;

(insn 35 34 0 (set (reg:SI 65 [ next_produced.6 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:21 -1
     (nil))

;; buf[buf_begin.5_6] = next_produced.6_7;

(insn 36 35 37 (set (reg:DI 76)
        (sign_extend:DI (reg:SI 64 [ buf_begin.5 ]))) producer_consumer_problem-seamaphore.c:21 -1
     (nil))

(insn 37 36 0 (set (mem/j:SI (plus:DI (mult:DI (reg:DI 76)
                    (const_int 4 [0x4]))
                (symbol_ref:DI ("buf")  <var_decl 0x7fa5dd841da8 buf>)) [0 buf S4 A32])
        (reg:SI 65 [ next_produced.6 ])) producer_consumer_problem-seamaphore.c:21 -1
     (nil))

;; next_produced.7_8 = next_produced;

(insn 38 37 0 (set (reg:SI 66 [ next_produced.7 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:22 -1
     (nil))

;; printf ("%d is added to the buffer\n", next_produced.7_8);

(insn 39 38 40 (set (reg:SI 4 si)
        (reg:SI 66 [ next_produced.7 ])) producer_consumer_problem-seamaphore.c:22 -1
     (nil))

(insn 40 39 41 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC4") [flags 0x2]  <var_decl 0x7fa5dd87c4c0 *.LC4>)) producer_consumer_problem-seamaphore.c:22 -1
     (nil))

(insn 41 40 42 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:22 -1
     (nil))

(call_insn 42 41 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:22 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))

;; Generating RTL for gimple basic block 4

;; 

(code_label 45 44 46 2 "" [0 uses])

(note 46 45 0 NOTE_INSN_BASIC_BLOCK)

;; buf_end.8_9 = buf_end;

(insn 47 46 0 (set (reg:SI 67 [ buf_end.8 ])
        (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

;; buf_end.9_10 = buf_end.8_9;

(insn 48 47 0 (set (reg:SI 68 [ buf_end.9 ])
        (reg:SI 67 [ buf_end.8 ])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

;; buf_end.10_11 = buf_end.9_10 + 1;

(insn 49 48 0 (parallel [
            (set (reg:SI 69 [ buf_end.10 ])
                (plus:SI (reg:SI 68 [ buf_end.9 ])
                    (const_int 1 [0x1])))
            (clobber (reg:CC 17 flags))
        ]) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

;; buf_end = buf_end.10_11;

(insn 50 49 0 (set (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])
        (reg:SI 69 [ buf_end.10 ])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

;; next_produced.11_12 = next_produced;

(insn 51 50 0 (set (reg:SI 70 [ next_produced.11 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

;; buf[buf_end.9_10] = next_produced.11_12;

(insn 52 51 53 (set (reg:DI 77)
        (sign_extend:DI (reg:SI 68 [ buf_end.9 ]))) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

(insn 53 52 0 (set (mem/j:SI (plus:DI (mult:DI (reg:DI 77)
                    (const_int 4 [0x4]))
                (symbol_ref:DI ("buf")  <var_decl 0x7fa5dd841da8 buf>)) [0 buf S4 A32])
        (reg:SI 70 [ next_produced.11 ])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))

;; next_produced.12_13 = next_produced;

(insn 54 53 0 (set (reg:SI 71 [ next_produced.12 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:25 -1
     (nil))

;; printf ("%d is added to the buffer\n", next_produced.12_13);

(insn 55 54 56 (set (reg:SI 4 si)
        (reg:SI 71 [ next_produced.12 ])) producer_consumer_problem-seamaphore.c:25 -1
     (nil))

(insn 56 55 57 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC4") [flags 0x2]  <var_decl 0x7fa5dd87c4c0 *.LC4>)) producer_consumer_problem-seamaphore.c:25 -1
     (nil))

(insn 57 56 58 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:25 -1
     (nil))

(call_insn 58 57 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:25 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))

;; Generating RTL for gimple basic block 5

;; 

(code_label 59 58 60 3 "" [0 uses])

(note 60 59 0 NOTE_INSN_BASIC_BLOCK)

;; mutex.13_14 = mutex;

(insn 61 60 0 (set (reg/f:DI 72 [ mutex.13 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:27 -1
     (nil))

;; sem_post (mutex.13_14);

(insn 62 61 63 (set (reg:DI 5 di)
        (reg/f:DI 72 [ mutex.13 ])) producer_consumer_problem-seamaphore.c:27 -1
     (nil))

(call_insn 63 62 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:27 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; full.14_15 = full;

(insn 64 63 0 (set (reg/f:DI 73 [ full.14 ])
        (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])) producer_consumer_problem-seamaphore.c:28 -1
     (nil))

;; sem_post (full.14_15);

(insn 65 64 66 (set (reg:DI 5 di)
        (reg/f:DI 73 [ full.14 ])) producer_consumer_problem-seamaphore.c:28 -1
     (nil))

(call_insn 66 65 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:28 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; next_produced ={v} {CLOBBER};

(nil)
deleting block 8
deleting block 7


try_optimize_cfg iteration 1



;;
;; Full RTL generated for this function:
;;
(note 1 0 4 NOTE_INSN_DELETED)
;; basic block 2, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 0, next block 3, flags: (NEW, REACHABLE, RTL)
;;  pred:       ENTRY (FALLTHRU)
(note 4 1 2 2 [bb 2] NOTE_INSN_BASIC_BLOCK)
(insn 2 4 3 2 (set (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -24 [0xffffffffffffffe8])) [0 arg1+0 S8 A64])
        (reg:DI 5 di [ arg1 ])) producer_consumer_problem-seamaphore.c:9 -1
     (nil))
(note 3 2 67 2 NOTE_INSN_FUNCTION_BEG)
;;  succ:       3 [100.0%]  (FALLTHRU)

;; basic block 3, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 2, next block 4, flags: (NEW, REACHABLE, RTL)
;;  pred:       6 (DFS_BACK)
;;              2 [100.0%]  (FALLTHRU)
(code_label 67 3 5 3 4 "" [1 uses])
(note 5 67 6 3 [bb 3] NOTE_INSN_BASIC_BLOCK)
(insn 6 5 7 3 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC0") [flags 0x2]  <var_decl 0x7fa5dd87c260 *.LC0>)) producer_consumer_problem-seamaphore.c:11 -1
     (nil))
(insn 7 6 8 3 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:11 -1
     (nil))
(call_insn 8 7 9 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:11 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (nil))))
(insn 9 8 10 3 (parallel [
            (set (reg:DI 75)
                (plus:DI (reg/f:DI 54 virtual-stack-vars)
                    (const_int -4 [0xfffffffffffffffc])))
            (clobber (reg:CC 17 flags))
        ]) producer_consumer_problem-seamaphore.c:13 -1
     (nil))
(insn 10 9 11 3 (set (reg:DI 4 si)
        (reg:DI 75)) producer_consumer_problem-seamaphore.c:13 -1
     (nil))
(insn 11 10 12 3 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC1") [flags 0x2]  <var_decl 0x7fa5dd87c2f8 *.LC1>)) producer_consumer_problem-seamaphore.c:13 -1
     (nil))
(insn 12 11 13 3 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:13 -1
     (nil))
(call_insn 13 12 14 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("*__isoc99_scanf") [flags 0x41]  <function_decl 0x7fa5dd71cb00 scanf>) [0 __builtin_scanf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:13 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (nil)))))
(insn 14 13 15 3 (set (reg:SI 59 [ next_produced.0 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:14 -1
     (nil))
(insn 15 14 16 3 (set (reg:SI 4 si)
        (reg:SI 59 [ next_produced.0 ])) producer_consumer_problem-seamaphore.c:14 -1
     (nil))
(insn 16 15 17 3 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC2") [flags 0x2]  <var_decl 0x7fa5dd87c390 *.LC2>)) producer_consumer_problem-seamaphore.c:14 -1
     (nil))
(insn 17 16 18 3 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:14 -1
     (nil))
(call_insn 18 17 19 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:14 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))
(insn 19 18 20 3 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC3") [flags 0x2]  <var_decl 0x7fa5dd87c428 *.LC3>)) producer_consumer_problem-seamaphore.c:15 -1
     (nil))
(call_insn 20 19 21 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:15 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 21 20 22 3 (set (reg/f:DI 60 [ empty.1 ])
        (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])) producer_consumer_problem-seamaphore.c:16 -1
     (nil))
(insn 22 21 23 3 (set (reg:DI 5 di)
        (reg/f:DI 60 [ empty.1 ])) producer_consumer_problem-seamaphore.c:16 -1
     (nil))
(call_insn 23 22 24 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:16 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 24 23 25 3 (set (reg/f:DI 61 [ mutex.2 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:17 -1
     (nil))
(insn 25 24 26 3 (set (reg:DI 5 di)
        (reg/f:DI 61 [ mutex.2 ])) producer_consumer_problem-seamaphore.c:17 -1
     (nil))
(call_insn 26 25 27 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:17 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 27 26 28 3 (set (reg:SI 62 [ buf_begin.3 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:18 -1
     (nil))
(insn 28 27 29 3 (set (reg:SI 63 [ buf_end.4 ])
        (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])) producer_consumer_problem-seamaphore.c:18 -1
     (nil))
(insn 29 28 30 3 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 62 [ buf_begin.3 ])
            (reg:SI 63 [ buf_end.4 ]))) producer_consumer_problem-seamaphore.c:18 -1
     (nil))
(jump_insn 30 29 31 3 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 45)
            (pc))) producer_consumer_problem-seamaphore.c:18 -1
     (nil)
 -> 45)
;;  succ:       4 (FALLTHRU)
;;              5

;; basic block 4, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 3, next block 5, flags: (NEW, REACHABLE, RTL)
;;  pred:       3 (FALLTHRU)
(note 31 30 32 4 [bb 4] NOTE_INSN_BASIC_BLOCK)
(insn 32 31 33 4 (set (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:19 -1
     (nil))
(insn 33 32 34 4 (set (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:20 -1
     (nil))
(insn 34 33 35 4 (set (reg:SI 64 [ buf_begin.5 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:21 -1
     (nil))
(insn 35 34 36 4 (set (reg:SI 65 [ next_produced.6 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:21 -1
     (nil))
(insn 36 35 37 4 (set (reg:DI 76)
        (sign_extend:DI (reg:SI 64 [ buf_begin.5 ]))) producer_consumer_problem-seamaphore.c:21 -1
     (nil))
(insn 37 36 38 4 (set (mem/j:SI (plus:DI (mult:DI (reg:DI 76)
                    (const_int 4 [0x4]))
                (symbol_ref:DI ("buf")  <var_decl 0x7fa5dd841da8 buf>)) [0 buf S4 A32])
        (reg:SI 65 [ next_produced.6 ])) producer_consumer_problem-seamaphore.c:21 -1
     (nil))
(insn 38 37 39 4 (set (reg:SI 66 [ next_produced.7 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:22 -1
     (nil))
(insn 39 38 40 4 (set (reg:SI 4 si)
        (reg:SI 66 [ next_produced.7 ])) producer_consumer_problem-seamaphore.c:22 -1
     (nil))
(insn 40 39 41 4 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC4") [flags 0x2]  <var_decl 0x7fa5dd87c4c0 *.LC4>)) producer_consumer_problem-seamaphore.c:22 -1
     (nil))
(insn 41 40 42 4 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:22 -1
     (nil))
(call_insn 42 41 43 4 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:22 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))
(jump_insn 43 42 44 4 (set (pc)
        (label_ref 59)) -1
     (nil)
 -> 59)
;;  succ:       6

(barrier 44 43 45)
;; basic block 5, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 4, next block 6, flags: (NEW, REACHABLE, RTL)
;;  pred:       3
(code_label 45 44 46 5 2 "" [1 uses])
(note 46 45 47 5 [bb 5] NOTE_INSN_BASIC_BLOCK)
(insn 47 46 48 5 (set (reg:SI 67 [ buf_end.8 ])
        (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 48 47 49 5 (set (reg:SI 68 [ buf_end.9 ])
        (reg:SI 67 [ buf_end.8 ])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 49 48 50 5 (parallel [
            (set (reg:SI 69 [ buf_end.10 ])
                (plus:SI (reg:SI 68 [ buf_end.9 ])
                    (const_int 1 [0x1])))
            (clobber (reg:CC 17 flags))
        ]) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 50 49 51 5 (set (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])
        (reg:SI 69 [ buf_end.10 ])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 51 50 52 5 (set (reg:SI 70 [ next_produced.11 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 52 51 53 5 (set (reg:DI 77)
        (sign_extend:DI (reg:SI 68 [ buf_end.9 ]))) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 53 52 54 5 (set (mem/j:SI (plus:DI (mult:DI (reg:DI 77)
                    (const_int 4 [0x4]))
                (symbol_ref:DI ("buf")  <var_decl 0x7fa5dd841da8 buf>)) [0 buf S4 A32])
        (reg:SI 70 [ next_produced.11 ])) producer_consumer_problem-seamaphore.c:24 -1
     (nil))
(insn 54 53 55 5 (set (reg:SI 71 [ next_produced.12 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:25 -1
     (nil))
(insn 55 54 56 5 (set (reg:SI 4 si)
        (reg:SI 71 [ next_produced.12 ])) producer_consumer_problem-seamaphore.c:25 -1
     (nil))
(insn 56 55 57 5 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC4") [flags 0x2]  <var_decl 0x7fa5dd87c4c0 *.LC4>)) producer_consumer_problem-seamaphore.c:25 -1
     (nil))
(insn 57 56 58 5 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:25 -1
     (nil))
(call_insn 58 57 59 5 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:25 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))
;;  succ:       6 (FALLTHRU)

;; basic block 6, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 5, next block 1, flags: (NEW, REACHABLE, RTL)
;;  pred:       4
;;              5 (FALLTHRU)
(code_label 59 58 60 6 3 "" [1 uses])
(note 60 59 61 6 [bb 6] NOTE_INSN_BASIC_BLOCK)
(insn 61 60 62 6 (set (reg/f:DI 72 [ mutex.13 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:27 -1
     (nil))
(insn 62 61 63 6 (set (reg:DI 5 di)
        (reg/f:DI 72 [ mutex.13 ])) producer_consumer_problem-seamaphore.c:27 -1
     (nil))
(call_insn 63 62 64 6 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:27 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 64 63 65 6 (set (reg/f:DI 73 [ full.14 ])
        (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])) producer_consumer_problem-seamaphore.c:28 -1
     (nil))
(insn 65 64 66 6 (set (reg:DI 5 di)
        (reg/f:DI 73 [ full.14 ])) producer_consumer_problem-seamaphore.c:28 -1
     (nil))
(call_insn 66 65 68 6 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:28 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(jump_insn 68 66 69 6 (set (pc)
        (label_ref 67)) producer_consumer_problem-seamaphore.c:29 -1
     (nil)
 -> 67)
;;  succ:       3 (DFS_BACK)

(barrier 69 68 0)

;; Function consumer (consumer, funcdef_no=3, decl_uid=2727, cgraph_uid=3)

consumer (void * arg1)
{
  int next_produced;
  union sem_t * empty.23;
  union sem_t * mutex.22;
  int buf_begin.21;
  int buf_begin.20;
  int buf_begin.19;
  int buf_end.18;
  int buf_begin.17;
  union sem_t * mutex.16;
  union sem_t * full.15;

;;   basic block 2, loop depth 0
;;    pred:       ENTRY
;;                4
  # next_produced_1 = PHI <next_produced_3(D)(0), next_produced_2(4)>
  delay (1000);
  full.15_4 = full;
  sem_wait (full.15_4);
  mutex.16_5 = mutex;
  sem_wait (mutex.16_5);
  buf_begin.17_6 = buf_begin;
  buf_end.18_7 = buf_end;
  if (buf_begin.17_6 < buf_end.18_7)
    goto <bb 3>;
  else
    goto <bb 4>;
;;    succ:       3
;;                4

;;   basic block 3, loop depth 0
;;    pred:       2
  buf_begin.19_8 = buf_begin;
  buf_begin.20_9 = buf_begin.19_8;
  buf_begin.21_10 = buf_begin.20_9 + 1;
  buf_begin = buf_begin.21_10;
  next_produced_11 = buf[buf_begin.20_9];
  printf ("\n%d is removed from the buffer\n", next_produced_11);
;;    succ:       4

;;   basic block 4, loop depth 0
;;    pred:       2
;;                3
  # next_produced_2 = PHI <next_produced_1(2), next_produced_11(3)>
  mutex.22_12 = mutex;
  sem_post (mutex.22_12);
  empty.23_13 = empty;
  sem_post (empty.23_13);
  printf ("Consumer thread consumed: %d\n", next_produced_2);
  goto <bb 2>;
;;    succ:       2

}



Partition map 

Partition 1 (next_produced_1 - 1 )
Partition 2 (next_produced_2 - 2 )
Partition 3 (next_produced_3(D) - 3 )
Partition 4 (full.15_4 - 4 )
Partition 5 (mutex.16_5 - 5 )
Partition 6 (buf_begin.17_6 - 6 )
Partition 7 (buf_end.18_7 - 7 )
Partition 8 (buf_begin.19_8 - 8 )
Partition 9 (buf_begin.20_9 - 9 )
Partition 10 (buf_begin.21_10 - 10 )
Partition 11 (next_produced_11 - 11 )
Partition 12 (mutex.22_12 - 12 )
Partition 13 (empty.23_13 - 13 )


Partition map 

Partition 0 (next_produced_1 - 1 )
Partition 1 (next_produced_2 - 2 )
Partition 2 (next_produced_3(D) - 3 )
Partition 3 (next_produced_11 - 11 )


Live on entry to BB2 : 

Live on entry to BB3 : 

Live on entry to BB4 : 

Conflict graph:

After sorting:
Sorted Coalesce list:
(2147483646) next_produced_1 <-> next_produced_2
(2147483646) next_produced_1 <-> next_produced_3(D)
(2147483646) next_produced_1 <-> next_produced_11
(1) next_produced_2 <-> next_produced_11

Partition map 

Partition 0 (next_produced_1 - 1 )
Partition 1 (next_produced_2 - 2 )
Partition 2 (next_produced_3(D) - 3 )
Partition 3 (next_produced_11 - 11 )

Coalesce list: (1)next_produced_1 & (2)next_produced_2 [map: 0, 1] : Success -> 0
Coalesce list: (1)next_produced_1 & (3)next_produced_3(D) [map: 0, 2] : Success -> 0
Coalesce list: (1)next_produced_1 & (11)next_produced_11 [map: 0, 3] : Success -> 0
Coalesce list: (2)next_produced_1 & (11)next_produced_1: Already Coalesced.
Coalesce list: (1)next_produced_1 & (3)next_produced_1: Already Coalesced.
After Coalescing:

Partition map 

Partition 0 (next_produced_1 - 1 2 3 11 )
Partition 1 (full.15_4 - 4 )
Partition 2 (mutex.16_5 - 5 )
Partition 3 (buf_begin.17_6 - 6 )
Partition 4 (buf_end.18_7 - 7 )
Partition 5 (buf_begin.19_8 - 8 )
Partition 6 (buf_begin.20_9 - 9 )
Partition 7 (buf_begin.21_10 - 10 )
Partition 8 (mutex.22_12 - 12 )
Partition 9 (empty.23_13 - 13 )

consumer (void * arg1)
{
  int next_produced;
  union sem_t * empty.23;
  union sem_t * mutex.22;
  int buf_begin.21;
  int buf_begin.20;
  int buf_begin.19;
  int buf_end.18;
  int buf_begin.17;
  union sem_t * mutex.16;
  union sem_t * full.15;

;;   basic block 2, loop depth 0
;;    pred:       ENTRY
;;                4
  # next_produced_1 = PHI <next_produced_3(D)(0), next_produced_2(4)>
  delay (1000);
  full.15_4 = full;
  sem_wait (full.15_4);
  mutex.16_5 = mutex;
  sem_wait (mutex.16_5);
  buf_begin.17_6 = buf_begin;
  buf_end.18_7 = buf_end;
  if (buf_begin.17_6 < buf_end.18_7)
    goto <bb 3>;
  else
    goto <bb 4>;
;;    succ:       3
;;                4

;;   basic block 3, loop depth 0
;;    pred:       2
  buf_begin.19_8 = buf_begin;
  buf_begin.20_9 = buf_begin.19_8;
  buf_begin.21_10 = buf_begin.20_9 + 1;
  buf_begin = buf_begin.21_10;
  next_produced_11 = buf[buf_begin.20_9];
  printf ("\n%d is removed from the buffer\n", next_produced_11);
;;    succ:       4

;;   basic block 4, loop depth 0
;;    pred:       2
;;                3
  # next_produced_2 = PHI <next_produced_1(2), next_produced_11(3)>
  mutex.22_12 = mutex;
  sem_post (mutex.22_12);
  empty.23_13 = empty;
  sem_post (empty.23_13);
  printf ("Consumer thread consumed: %d\n", next_produced_2);
  goto <bb 2>;
;;    succ:       2

}


Partition 0: size 4 align 4
	next_produced_1

;; Generating RTL for gimple basic block 2

;; delay (1000);

(insn 6 5 7 (set (reg:SI 5 di)
        (const_int 1000 [0x3e8])) producer_consumer_problem-seamaphore.c:33 -1
     (nil))

(insn 7 6 8 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:33 -1
     (nil))

(call_insn 8 7 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("delay") [flags 0x41]  <function_decl 0x7fa5dd86e000 delay>) [0 delay S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:33 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_BR_PRED (use (reg:SI 5 di))
            (nil))))

;; full.15_4 = full;

(insn 9 8 0 (set (reg/f:DI 59 [ full.15 ])
        (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])) producer_consumer_problem-seamaphore.c:35 -1
     (nil))

;; sem_wait (full.15_4);

(insn 10 9 11 (set (reg:DI 5 di)
        (reg/f:DI 59 [ full.15 ])) producer_consumer_problem-seamaphore.c:35 -1
     (nil))

(call_insn 11 10 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:35 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; mutex.16_5 = mutex;

(insn 12 11 0 (set (reg/f:DI 60 [ mutex.16 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:36 -1
     (nil))

;; sem_wait (mutex.16_5);

(insn 13 12 14 (set (reg:DI 5 di)
        (reg/f:DI 60 [ mutex.16 ])) producer_consumer_problem-seamaphore.c:36 -1
     (nil))

(call_insn 14 13 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:36 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; buf_begin.17_6 = buf_begin;

(insn 15 14 0 (set (reg:SI 61 [ buf_begin.17 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:37 -1
     (nil))

;; buf_end.18_7 = buf_end;

(insn 16 15 0 (set (reg:SI 62 [ buf_end.18 ])
        (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])) producer_consumer_problem-seamaphore.c:37 -1
     (nil))

;; if (buf_begin.17_6 < buf_end.18_7)

(insn 17 16 18 (set (reg:CCGC 17 flags)
        (compare:CCGC (reg:SI 61 [ buf_begin.17 ])
            (reg:SI 62 [ buf_end.18 ]))) producer_consumer_problem-seamaphore.c:37 -1
     (nil))

(jump_insn 18 17 0 (set (pc)
        (if_then_else (ge (reg:CCGC 17 flags)
                (const_int 0 [0]))
            (label_ref 0)
            (pc))) producer_consumer_problem-seamaphore.c:37 -1
     (nil))

;; Generating RTL for gimple basic block 3

;; buf_begin.19_8 = buf_begin;

(insn 20 19 0 (set (reg:SI 63 [ buf_begin.19 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

;; buf_begin.20_9 = buf_begin.19_8;

(insn 21 20 0 (set (reg:SI 64 [ buf_begin.20 ])
        (reg:SI 63 [ buf_begin.19 ])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

;; buf_begin.21_10 = buf_begin.20_9 + 1;

(insn 22 21 0 (parallel [
            (set (reg:SI 65 [ buf_begin.21 ])
                (plus:SI (reg:SI 64 [ buf_begin.20 ])
                    (const_int 1 [0x1])))
            (clobber (reg:CC 17 flags))
        ]) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

;; buf_begin = buf_begin.21_10;

(insn 23 22 0 (set (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])
        (reg:SI 65 [ buf_begin.21 ])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

;; next_produced_11 = buf[buf_begin.20_9];

(insn 24 23 25 (set (reg:DI 69)
        (sign_extend:DI (reg:SI 64 [ buf_begin.20 ]))) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

(insn 25 24 26 (set (reg:SI 70)
        (mem/j:SI (plus:DI (mult:DI (reg:DI 69)
                    (const_int 4 [0x4]))
                (symbol_ref:DI ("buf")  <var_decl 0x7fa5dd841da8 buf>)) [0 buf S4 A32])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

(insn 26 25 0 (set (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])
        (reg:SI 70)) producer_consumer_problem-seamaphore.c:38 -1
     (nil))

;; printf ("\n%d is removed from the buffer\n", next_produced_11);

(insn 27 26 28 (set (reg:SI 71)
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:39 -1
     (nil))

(insn 28 27 29 (set (reg:SI 4 si)
        (reg:SI 71)) producer_consumer_problem-seamaphore.c:39 -1
     (nil))

(insn 29 28 30 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC5") [flags 0x2]  <var_decl 0x7fa5dd87cb48 *.LC5>)) producer_consumer_problem-seamaphore.c:39 -1
     (nil))

(insn 30 29 31 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:39 -1
     (nil))

(call_insn 31 30 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:39 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))

;; Generating RTL for gimple basic block 4

;; 

(code_label 32 31 33 6 "" [0 uses])

(note 33 32 0 NOTE_INSN_BASIC_BLOCK)

;; mutex.22_12 = mutex;

(insn 34 33 0 (set (reg/f:DI 66 [ mutex.22 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:41 -1
     (nil))

;; sem_post (mutex.22_12);

(insn 35 34 36 (set (reg:DI 5 di)
        (reg/f:DI 66 [ mutex.22 ])) producer_consumer_problem-seamaphore.c:41 -1
     (nil))

(call_insn 36 35 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:41 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; empty.23_13 = empty;

(insn 37 36 0 (set (reg/f:DI 67 [ empty.23 ])
        (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])) producer_consumer_problem-seamaphore.c:42 -1
     (nil))

;; sem_post (empty.23_13);

(insn 38 37 39 (set (reg:DI 5 di)
        (reg/f:DI 67 [ empty.23 ])) producer_consumer_problem-seamaphore.c:42 -1
     (nil))

(call_insn 39 38 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:42 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; printf ("Consumer thread consumed: %d\n", next_produced_2);

(insn 40 39 41 (set (reg:SI 72)
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:43 -1
     (nil))

(insn 41 40 42 (set (reg:SI 4 si)
        (reg:SI 72)) producer_consumer_problem-seamaphore.c:43 -1
     (nil))

(insn 42 41 43 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC6") [flags 0x2]  <var_decl 0x7fa5dd87cbe0 *.LC6>)) producer_consumer_problem-seamaphore.c:43 -1
     (nil))

(insn 43 42 44 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:43 -1
     (nil))

(call_insn 44 43 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:43 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))
deleting block 7
deleting block 6


try_optimize_cfg iteration 1



;;
;; Full RTL generated for this function:
;;
(note 1 0 4 NOTE_INSN_DELETED)
;; basic block 2, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 0, next block 3, flags: (NEW, REACHABLE, RTL)
;;  pred:       ENTRY (FALLTHRU)
(note 4 1 2 2 [bb 2] NOTE_INSN_BASIC_BLOCK)
(insn 2 4 3 2 (set (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -24 [0xffffffffffffffe8])) [0 arg1+0 S8 A64])
        (reg:DI 5 di [ arg1 ])) producer_consumer_problem-seamaphore.c:31 -1
     (nil))
(note 3 2 45 2 NOTE_INSN_FUNCTION_BEG)
;;  succ:       3 [100.0%]  (FALLTHRU)

;; basic block 3, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 2, next block 4, flags: (NEW, REACHABLE, RTL)
;;  pred:       5 (DFS_BACK)
;;              2 [100.0%]  (FALLTHRU)
(code_label 45 3 5 3 7 "" [1 uses])
(note 5 45 6 3 [bb 3] NOTE_INSN_BASIC_BLOCK)
(insn 6 5 7 3 (set (reg:SI 5 di)
        (const_int 1000 [0x3e8])) producer_consumer_problem-seamaphore.c:33 -1
     (nil))
(insn 7 6 8 3 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:33 -1
     (nil))
(call_insn 8 7 9 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("delay") [flags 0x41]  <function_decl 0x7fa5dd86e000 delay>) [0 delay S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:33 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_BR_PRED (use (reg:SI 5 di))
            (nil))))
(insn 9 8 10 3 (set (reg/f:DI 59 [ full.15 ])
        (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])) producer_consumer_problem-seamaphore.c:35 -1
     (nil))
(insn 10 9 11 3 (set (reg:DI 5 di)
        (reg/f:DI 59 [ full.15 ])) producer_consumer_problem-seamaphore.c:35 -1
     (nil))
(call_insn 11 10 12 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:35 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 12 11 13 3 (set (reg/f:DI 60 [ mutex.16 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:36 -1
     (nil))
(insn 13 12 14 3 (set (reg:DI 5 di)
        (reg/f:DI 60 [ mutex.16 ])) producer_consumer_problem-seamaphore.c:36 -1
     (nil))
(call_insn 14 13 15 3 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_wait") [flags 0x41]  <function_decl 0x7fa5dd863900 sem_wait>) [0 sem_wait S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:36 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 15 14 16 3 (set (reg:SI 61 [ buf_begin.17 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:37 -1
     (nil))
(insn 16 15 17 3 (set (reg:SI 62 [ buf_end.18 ])
        (mem/c:SI (symbol_ref:DI ("buf_end") [flags 0x2]  <var_decl 0x7fa5dd841ed8 buf_end>) [0 buf_end+0 S4 A32])) producer_consumer_problem-seamaphore.c:37 -1
     (nil))
(insn 17 16 18 3 (set (reg:CCGC 17 flags)
        (compare:CCGC (reg:SI 61 [ buf_begin.17 ])
            (reg:SI 62 [ buf_end.18 ]))) producer_consumer_problem-seamaphore.c:37 -1
     (nil))
(jump_insn 18 17 19 3 (set (pc)
        (if_then_else (ge (reg:CCGC 17 flags)
                (const_int 0 [0]))
            (label_ref 32)
            (pc))) producer_consumer_problem-seamaphore.c:37 -1
     (nil)
 -> 32)
;;  succ:       4 (FALLTHRU)
;;              5

;; basic block 4, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 3, next block 5, flags: (NEW, REACHABLE, RTL)
;;  pred:       3 (FALLTHRU)
(note 19 18 20 4 [bb 4] NOTE_INSN_BASIC_BLOCK)
(insn 20 19 21 4 (set (reg:SI 63 [ buf_begin.19 ])
        (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 21 20 22 4 (set (reg:SI 64 [ buf_begin.20 ])
        (reg:SI 63 [ buf_begin.19 ])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 22 21 23 4 (parallel [
            (set (reg:SI 65 [ buf_begin.21 ])
                (plus:SI (reg:SI 64 [ buf_begin.20 ])
                    (const_int 1 [0x1])))
            (clobber (reg:CC 17 flags))
        ]) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 23 22 24 4 (set (mem/c:SI (symbol_ref:DI ("buf_begin") [flags 0x2]  <var_decl 0x7fa5dd841e40 buf_begin>) [0 buf_begin+0 S4 A32])
        (reg:SI 65 [ buf_begin.21 ])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 24 23 25 4 (set (reg:DI 69)
        (sign_extend:DI (reg:SI 64 [ buf_begin.20 ]))) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 25 24 26 4 (set (reg:SI 70)
        (mem/j:SI (plus:DI (mult:DI (reg:DI 69)
                    (const_int 4 [0x4]))
                (symbol_ref:DI ("buf")  <var_decl 0x7fa5dd841da8 buf>)) [0 buf S4 A32])) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 26 25 27 4 (set (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])
        (reg:SI 70)) producer_consumer_problem-seamaphore.c:38 -1
     (nil))
(insn 27 26 28 4 (set (reg:SI 71)
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:39 -1
     (nil))
(insn 28 27 29 4 (set (reg:SI 4 si)
        (reg:SI 71)) producer_consumer_problem-seamaphore.c:39 -1
     (nil))
(insn 29 28 30 4 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC5") [flags 0x2]  <var_decl 0x7fa5dd87cb48 *.LC5>)) producer_consumer_problem-seamaphore.c:39 -1
     (nil))
(insn 30 29 31 4 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:39 -1
     (nil))
(call_insn 31 30 32 4 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:39 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))
;;  succ:       5 (FALLTHRU)

;; basic block 5, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 4, next block 1, flags: (NEW, REACHABLE, RTL)
;;  pred:       3
;;              4 (FALLTHRU)
(code_label 32 31 33 5 6 "" [1 uses])
(note 33 32 34 5 [bb 5] NOTE_INSN_BASIC_BLOCK)
(insn 34 33 35 5 (set (reg/f:DI 66 [ mutex.22 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:41 -1
     (nil))
(insn 35 34 36 5 (set (reg:DI 5 di)
        (reg/f:DI 66 [ mutex.22 ])) producer_consumer_problem-seamaphore.c:41 -1
     (nil))
(call_insn 36 35 37 5 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:41 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 37 36 38 5 (set (reg/f:DI 67 [ empty.23 ])
        (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])) producer_consumer_problem-seamaphore.c:42 -1
     (nil))
(insn 38 37 39 5 (set (reg:DI 5 di)
        (reg/f:DI 67 [ empty.23 ])) producer_consumer_problem-seamaphore.c:42 -1
     (nil))
(call_insn 39 38 40 5 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_post") [flags 0x41]  <function_decl 0x7fa5dd863c00 sem_post>) [0 sem_post S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:42 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 40 39 41 5 (set (reg:SI 72)
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -4 [0xfffffffffffffffc])) [0 next_produced+0 S4 A32])) producer_consumer_problem-seamaphore.c:43 -1
     (nil))
(insn 41 40 42 5 (set (reg:SI 4 si)
        (reg:SI 72)) producer_consumer_problem-seamaphore.c:43 -1
     (nil))
(insn 42 41 43 5 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC6") [flags 0x2]  <var_decl 0x7fa5dd87cbe0 *.LC6>)) producer_consumer_problem-seamaphore.c:43 -1
     (nil))
(insn 43 42 44 5 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:43 -1
     (nil))
(call_insn 44 43 46 5 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("printf") [flags 0x41]  <function_decl 0x7fa5dd71af00 printf>) [0 __builtin_printf S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:43 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_BR_PRED (use (reg:SI 4 si))
                (nil)))))
(jump_insn 46 44 47 5 (set (pc)
        (label_ref 45)) producer_consumer_problem-seamaphore.c:44 -1
     (nil)
 -> 45)
;;  succ:       3 (DFS_BACK)

(barrier 47 46 0)

;; Function main (main, funcdef_no=4, decl_uid=2733, cgraph_uid=4)

main ()
{
  int n;
  pthread_t * cid;
  pthread_t * pid;
  int D.2790;
  long unsigned int D.2789;
  long unsigned int D.2788;
  int D.2785;
  union sem_t * mutex.30;
  int D.2781;
  union sem_t * full.29;
  int D.2777;
  union sem_t * empty.28;
  unsigned int n.27;
  void * mutex.26;
  void * full.25;
  void * empty.24;
  int _9;
  int _11;
  int _13;
  long unsigned int _14;
  long unsigned int _15;
  int _16;

;;   basic block 2, loop depth 0
;;    pred:       ENTRY
  pid_1 = malloc (8);
  cid_2 = malloc (8);
  empty.24_3 = malloc (32);
  empty = empty.24_3;
  full.25_4 = malloc (32);
  full = full.25_4;
  mutex.26_5 = malloc (32);
  mutex = mutex.26_5;
  n_6 = 1;
  n.27_7 = (unsigned int) n_6;
  empty.28_8 = empty;
  _9 = sem_init (empty.28_8, 0, n.27_7);
  if (_9 == -1)
    goto <bb 3>;
  else
    goto <bb 4>;
;;    succ:       3
;;                4

;;   basic block 3, loop depth 0
;;    pred:       2
  __builtin_puts (&"\nCannot initialze semapfore"[0]);
  exit (1);
;;    succ:      

;;   basic block 4, loop depth 0
;;    pred:       2
  full.29_10 = full;
  _11 = sem_init (full.29_10, 0, 0);
  if (_11 == -1)
    goto <bb 5>;
  else
    goto <bb 6>;
;;    succ:       5
;;                6

;;   basic block 5, loop depth 0
;;    pred:       4
  __builtin_puts (&"\nCannot initialze semapfore"[0]);
  exit (1);
;;    succ:      

;;   basic block 6, loop depth 0
;;    pred:       4
  mutex.30_12 = mutex;
  _13 = sem_init (mutex.30_12, 0, 1);
  if (_13 == -1)
    goto <bb 7>;
  else
    goto <bb 8>;
;;    succ:       7
;;                8

;;   basic block 7, loop depth 0
;;    pred:       6
  __builtin_puts (&"\nCannot initialze semapfore"[0]);
  exit (1);
;;    succ:      

;;   basic block 8, loop depth 0
;;    pred:       6
  pthread_create (pid_1, 0B, producer, 0B);
  pthread_create (cid_2, 0B, consumer, 0B);
  _14 = *pid_1;
  pthread_join (_14, 0B);
  _15 = *cid_2;
  pthread_join (_15, 0B);
  _16 = 0;
;;    succ:       9

;;   basic block 9, loop depth 0
;;    pred:       8
<L6>:
  return _16;
;;    succ:       EXIT

}



Partition map 

Partition 1 (pid_1 - 1 )
Partition 2 (cid_2 - 2 )
Partition 3 (empty.24_3 - 3 )
Partition 4 (full.25_4 - 4 )
Partition 5 (mutex.26_5 - 5 )
Partition 6 (n_6 - 6 )
Partition 7 (n.27_7 - 7 )
Partition 8 (empty.28_8 - 8 )
Partition 9 (_9 - 9 )
Partition 10 (full.29_10 - 10 )
Partition 11 (_11 - 11 )
Partition 12 (mutex.30_12 - 12 )
Partition 13 (_13 - 13 )
Partition 14 (_14 - 14 )
Partition 15 (_15 - 15 )
Partition 16 (_16 - 16 )

After Coalescing:

Partition map 

Partition 0 (pid_1 - 1 )
Partition 1 (cid_2 - 2 )
Partition 2 (empty.24_3 - 3 )
Partition 3 (full.25_4 - 4 )
Partition 4 (mutex.26_5 - 5 )
Partition 5 (n_6 - 6 )
Partition 6 (n.27_7 - 7 )
Partition 7 (empty.28_8 - 8 )
Partition 8 (_9 - 9 )
Partition 9 (full.29_10 - 10 )
Partition 10 (_11 - 11 )
Partition 11 (mutex.30_12 - 12 )
Partition 12 (_13 - 13 )
Partition 13 (_14 - 14 )
Partition 14 (_15 - 15 )
Partition 15 (_16 - 16 )

main ()
{
  int n;
  pthread_t * cid;
  pthread_t * pid;
  int D.2790;
  long unsigned int D.2789;
  long unsigned int D.2788;
  int D.2785;
  union sem_t * mutex.30;
  int D.2781;
  union sem_t * full.29;
  int D.2777;
  union sem_t * empty.28;
  unsigned int n.27;
  void * mutex.26;
  void * full.25;
  void * empty.24;
  int _9;
  int _11;
  int _13;
  long unsigned int _14;
  long unsigned int _15;
  int _16;

;;   basic block 2, loop depth 0
;;    pred:       ENTRY
  pid_1 = malloc (8);
  cid_2 = malloc (8);
  empty.24_3 = malloc (32);
  empty = empty.24_3;
  full.25_4 = malloc (32);
  full = full.25_4;
  mutex.26_5 = malloc (32);
  mutex = mutex.26_5;
  n_6 = 1;
  n.27_7 = (unsigned int) n_6;
  empty.28_8 = empty;
  _9 = sem_init (empty.28_8, 0, n.27_7);
  if (_9 == -1)
    goto <bb 3>;
  else
    goto <bb 4>;
;;    succ:       3
;;                4

;;   basic block 3, loop depth 0
;;    pred:       2
  __builtin_puts (&"\nCannot initialze semapfore"[0]);
  exit (1);
;;    succ:      

;;   basic block 4, loop depth 0
;;    pred:       2
  full.29_10 = full;
  _11 = sem_init (full.29_10, 0, 0);
  if (_11 == -1)
    goto <bb 5>;
  else
    goto <bb 6>;
;;    succ:       5
;;                6

;;   basic block 5, loop depth 0
;;    pred:       4
  __builtin_puts (&"\nCannot initialze semapfore"[0]);
  exit (1);
;;    succ:      

;;   basic block 6, loop depth 0
;;    pred:       4
  mutex.30_12 = mutex;
  _13 = sem_init (mutex.30_12, 0, 1);
  if (_13 == -1)
    goto <bb 7>;
  else
    goto <bb 8>;
;;    succ:       7
;;                8

;;   basic block 7, loop depth 0
;;    pred:       6
  __builtin_puts (&"\nCannot initialze semapfore"[0]);
  exit (1);
;;    succ:      

;;   basic block 8, loop depth 0
;;    pred:       6
  pthread_create (pid_1, 0B, producer, 0B);
  pthread_create (cid_2, 0B, consumer, 0B);
  _14 = *pid_1;
  pthread_join (_14, 0B);
  _15 = *cid_2;
  pthread_join (_15, 0B);
  _16 = 0;
;;    succ:       9

;;   basic block 9, loop depth 0
;;    pred:       8
<L6>:
  return _16;
;;    succ:       EXIT

}


Partition 1: size 8 align 8
	cid_2
Partition 0: size 8 align 8
	pid_1
Partition 2: size 4 align 4
	n_6

;; Generating RTL for gimple basic block 2

;; pid_1 = malloc (8);

(insn 5 4 6 (set (reg:DI 5 di)
        (const_int 8 [0x8])) producer_consumer_problem-seamaphore.c:47 -1
     (nil))

(call_insn 6 5 7 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:47 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

(insn 7 6 8 (set (reg/f:DI 73)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:47 -1
     (expr_list:REG_NOALIAS (reg/f:DI 73)
        (nil)))

(insn 8 7 0 (set (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -16 [0xfffffffffffffff0])) [0 pid+0 S8 A64])
        (reg/f:DI 73)) producer_consumer_problem-seamaphore.c:47 -1
     (nil))

;; cid_2 = malloc (8);

(insn 9 8 10 (set (reg:DI 5 di)
        (const_int 8 [0x8])) producer_consumer_problem-seamaphore.c:48 -1
     (nil))

(call_insn 10 9 11 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:48 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

(insn 11 10 12 (set (reg/f:DI 74)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:48 -1
     (expr_list:REG_NOALIAS (reg/f:DI 74)
        (nil)))

(insn 12 11 0 (set (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -8 [0xfffffffffffffff8])) [0 cid+0 S8 A64])
        (reg/f:DI 74)) producer_consumer_problem-seamaphore.c:48 -1
     (nil))

;; empty.24_3 = malloc (32);

(insn 13 12 14 (set (reg:DI 5 di)
        (const_int 32 [0x20])) producer_consumer_problem-seamaphore.c:49 -1
     (nil))

(call_insn 14 13 15 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:49 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

(insn 15 14 16 (set (reg/f:DI 75)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:49 -1
     (expr_list:REG_NOALIAS (reg/f:DI 75)
        (nil)))

(insn 16 15 0 (set (reg/f:DI 59 [ empty.24 ])
        (reg/f:DI 75)) producer_consumer_problem-seamaphore.c:49 -1
     (nil))

;; empty = empty.24_3;

(insn 17 16 0 (set (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])
        (reg/f:DI 59 [ empty.24 ])) producer_consumer_problem-seamaphore.c:49 -1
     (nil))

;; full.25_4 = malloc (32);

(insn 18 17 19 (set (reg:DI 5 di)
        (const_int 32 [0x20])) producer_consumer_problem-seamaphore.c:50 -1
     (nil))

(call_insn 19 18 20 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:50 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

(insn 20 19 21 (set (reg/f:DI 76)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:50 -1
     (expr_list:REG_NOALIAS (reg/f:DI 76)
        (nil)))

(insn 21 20 0 (set (reg/f:DI 60 [ full.25 ])
        (reg/f:DI 76)) producer_consumer_problem-seamaphore.c:50 -1
     (nil))

;; full = full.25_4;

(insn 22 21 0 (set (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])
        (reg/f:DI 60 [ full.25 ])) producer_consumer_problem-seamaphore.c:50 -1
     (nil))

;; mutex.26_5 = malloc (32);

(insn 23 22 24 (set (reg:DI 5 di)
        (const_int 32 [0x20])) producer_consumer_problem-seamaphore.c:51 -1
     (nil))

(call_insn 24 23 25 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:51 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

(insn 25 24 26 (set (reg/f:DI 77)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:51 -1
     (expr_list:REG_NOALIAS (reg/f:DI 77)
        (nil)))

(insn 26 25 0 (set (reg/f:DI 61 [ mutex.26 ])
        (reg/f:DI 77)) producer_consumer_problem-seamaphore.c:51 -1
     (nil))

;; mutex = mutex.26_5;

(insn 27 26 0 (set (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])
        (reg/f:DI 61 [ mutex.26 ])) producer_consumer_problem-seamaphore.c:51 -1
     (nil))

;; n_6 = 1;

(insn 28 27 0 (set (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -20 [0xffffffffffffffec])) [0 n+0 S4 A32])
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:55 -1
     (nil))

;; n.27_7 = (unsigned int) n_6;

(insn 29 28 0 (set (reg:SI 62 [ n.27 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -20 [0xffffffffffffffec])) [0 n+0 S4 A32])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

;; empty.28_8 = empty;

(insn 30 29 0 (set (reg/f:DI 63 [ empty.28 ])
        (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

;; _9 = sem_init (empty.28_8, 0, n.27_7);

(insn 31 30 32 (set (reg:SI 1 dx)
        (reg:SI 62 [ n.27 ])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

(insn 32 31 33 (set (reg:SI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

(insn 33 32 34 (set (reg:DI 5 di)
        (reg/f:DI 63 [ empty.28 ])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

(call_insn 34 33 35 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_init") [flags 0x41]  <function_decl 0x7fa5dd863400 sem_init>) [0 sem_init S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:56 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (expr_list:REG_BR_PRED (use (reg:SI 4 si))
            (expr_list:REG_BR_PRED (use (reg:SI 1 dx))
                (nil)))))

(insn 35 34 0 (set (reg:SI 64 [ D.2802 ])
        (reg:SI 0 ax)) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

;; if (_9 == -1)

(insn 36 35 37 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 64 [ D.2802 ])
            (const_int -1 [0xffffffffffffffff]))) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

(jump_insn 37 36 0 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 0)
            (pc))) producer_consumer_problem-seamaphore.c:56 -1
     (nil))

;; Generating RTL for gimple basic block 3

;; __builtin_puts (&"\nCannot initialze semapfore"[0]);

(insn 39 38 40 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC7") [flags 0x2]  <var_decl 0x7fa5dd48d260 *.LC7>)) producer_consumer_problem-seamaphore.c:58 -1
     (nil))

(call_insn 40 39 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:58 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; exit (1);

(insn 41 40 42 (set (reg:SI 5 di)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:59 -1
     (nil))

(call_insn 42 41 43 (call (mem:QI (symbol_ref:DI ("exit") [flags 0x41]  <function_decl 0x7fa5dd72ef00 exit>) [0 __builtin_exit S1 A8])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:59 -1
     (expr_list:REG_NORETURN (const_int 0 [0])
        (expr_list:REG_EH_REGION (const_int 0 [0])
            (nil)))
    (expr_list:REG_BR_PRED (use (reg:SI 5 di))
        (nil)))

(barrier 43 42 0)

;; Generating RTL for gimple basic block 4

;; 

(code_label 44 43 45 9 "" [0 uses])

(note 45 44 0 NOTE_INSN_BASIC_BLOCK)

;; full.29_10 = full;

(insn 46 45 0 (set (reg/f:DI 65 [ full.29 ])
        (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

;; _11 = sem_init (full.29_10, 0, 0);

(insn 47 46 48 (set (reg:SI 1 dx)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

(insn 48 47 49 (set (reg:SI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

(insn 49 48 50 (set (reg:DI 5 di)
        (reg/f:DI 65 [ full.29 ])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

(call_insn 50 49 51 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_init") [flags 0x41]  <function_decl 0x7fa5dd863400 sem_init>) [0 sem_init S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:61 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (expr_list:REG_BR_PRED (use (reg:SI 4 si))
            (expr_list:REG_BR_PRED (use (reg:SI 1 dx))
                (nil)))))

(insn 51 50 0 (set (reg:SI 66 [ D.2802 ])
        (reg:SI 0 ax)) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

;; if (_11 == -1)

(insn 52 51 53 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 66 [ D.2802 ])
            (const_int -1 [0xffffffffffffffff]))) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

(jump_insn 53 52 0 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 0)
            (pc))) producer_consumer_problem-seamaphore.c:61 -1
     (nil))

;; Generating RTL for gimple basic block 5

;; __builtin_puts (&"\nCannot initialze semapfore"[0]);

(insn 55 54 56 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC7") [flags 0x2]  <var_decl 0x7fa5dd48d260 *.LC7>)) producer_consumer_problem-seamaphore.c:63 -1
     (nil))

(call_insn 56 55 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:63 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; exit (1);

(insn 57 56 58 (set (reg:SI 5 di)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:64 -1
     (nil))

(call_insn 58 57 59 (call (mem:QI (symbol_ref:DI ("exit") [flags 0x41]  <function_decl 0x7fa5dd72ef00 exit>) [0 __builtin_exit S1 A8])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:64 -1
     (expr_list:REG_NORETURN (const_int 0 [0])
        (expr_list:REG_EH_REGION (const_int 0 [0])
            (nil)))
    (expr_list:REG_BR_PRED (use (reg:SI 5 di))
        (nil)))

(barrier 59 58 0)

;; Generating RTL for gimple basic block 6

;; 

(code_label 60 59 61 10 "" [0 uses])

(note 61 60 0 NOTE_INSN_BASIC_BLOCK)

;; mutex.30_12 = mutex;

(insn 62 61 0 (set (reg/f:DI 67 [ mutex.30 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

;; _13 = sem_init (mutex.30_12, 0, 1);

(insn 63 62 64 (set (reg:SI 1 dx)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

(insn 64 63 65 (set (reg:SI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

(insn 65 64 66 (set (reg:DI 5 di)
        (reg/f:DI 67 [ mutex.30 ])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

(call_insn 66 65 67 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_init") [flags 0x41]  <function_decl 0x7fa5dd863400 sem_init>) [0 sem_init S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:66 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (expr_list:REG_BR_PRED (use (reg:SI 4 si))
            (expr_list:REG_BR_PRED (use (reg:SI 1 dx))
                (nil)))))

(insn 67 66 0 (set (reg:SI 68 [ D.2802 ])
        (reg:SI 0 ax)) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

;; if (_13 == -1)

(insn 68 67 69 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 68 [ D.2802 ])
            (const_int -1 [0xffffffffffffffff]))) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

(jump_insn 69 68 0 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 0)
            (pc))) producer_consumer_problem-seamaphore.c:66 -1
     (nil))

;; Generating RTL for gimple basic block 7

;; __builtin_puts (&"\nCannot initialze semapfore"[0]);

(insn 71 70 72 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC7") [flags 0x2]  <var_decl 0x7fa5dd48d260 *.LC7>)) producer_consumer_problem-seamaphore.c:68 -1
     (nil))

(call_insn 72 71 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:68 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))

;; exit (1);

(insn 73 72 74 (set (reg:SI 5 di)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:69 -1
     (nil))

(call_insn 74 73 75 (call (mem:QI (symbol_ref:DI ("exit") [flags 0x41]  <function_decl 0x7fa5dd72ef00 exit>) [0 __builtin_exit S1 A8])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:69 -1
     (expr_list:REG_NORETURN (const_int 0 [0])
        (expr_list:REG_EH_REGION (const_int 0 [0])
            (nil)))
    (expr_list:REG_BR_PRED (use (reg:SI 5 di))
        (nil)))

(barrier 75 74 0)

;; Generating RTL for gimple basic block 8

;; 

(code_label 76 75 77 11 "" [0 uses])

(note 77 76 0 NOTE_INSN_BASIC_BLOCK)

;; pthread_create (pid_1, 0B, producer, 0B);

(insn 78 77 79 (set (reg:DI 78)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -16 [0xfffffffffffffff0])) [0 pid+0 S8 A64])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))

(insn 79 78 80 (set (reg:DI 2 cx)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))

(insn 80 79 81 (set (reg:DI 1 dx)
        (symbol_ref:DI ("producer") [flags 0x3]  <function_decl 0x7fa5dd863e00 producer>)) producer_consumer_problem-seamaphore.c:71 -1
     (nil))

(insn 81 80 82 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))

(insn 82 81 83 (set (reg:DI 5 di)
        (reg:DI 78)) producer_consumer_problem-seamaphore.c:71 -1
     (nil))

(insn 83 82 84 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))

(call_insn 84 83 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_create") [flags 0x41]  <function_decl 0x7fa5dd86e300 pthread_create>) [0 pthread_create S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:71 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 1 dx))
                    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 2 cx))
                        (nil)))))))

;; pthread_create (cid_2, 0B, consumer, 0B);

(insn 85 84 86 (set (reg:DI 79)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -8 [0xfffffffffffffff8])) [0 cid+0 S8 A64])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))

(insn 86 85 87 (set (reg:DI 2 cx)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))

(insn 87 86 88 (set (reg:DI 1 dx)
        (symbol_ref:DI ("consumer") [flags 0x3]  <function_decl 0x7fa5dd863f00 consumer>)) producer_consumer_problem-seamaphore.c:72 -1
     (nil))

(insn 88 87 89 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))

(insn 89 88 90 (set (reg:DI 5 di)
        (reg:DI 79)) producer_consumer_problem-seamaphore.c:72 -1
     (nil))

(insn 90 89 91 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))

(call_insn 91 90 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_create") [flags 0x41]  <function_decl 0x7fa5dd86e300 pthread_create>) [0 pthread_create S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:72 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 1 dx))
                    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 2 cx))
                        (nil)))))))

;; _14 = *pid_1;

(insn 92 91 93 (set (reg/f:DI 80)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -16 [0xfffffffffffffff0])) [0 pid+0 S8 A64])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))

(insn 93 92 0 (set (reg:DI 69 [ D.2803 ])
        (mem:DI (reg/f:DI 80) [0 *pid_1+0 S8 A64])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))

;; pthread_join (_14, 0B);

(insn 94 93 95 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))

(insn 95 94 96 (set (reg:DI 5 di)
        (reg:DI 69 [ D.2803 ])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))

(insn 96 95 97 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))

(call_insn 97 96 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_join") [flags 0x41]  <function_decl 0x7fa5dd86e400 pthread_join>) [0 pthread_join S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:73 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (nil)))))

;; _15 = *cid_2;

(insn 98 97 99 (set (reg/f:DI 81)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -8 [0xfffffffffffffff8])) [0 cid+0 S8 A64])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))

(insn 99 98 0 (set (reg:DI 70 [ D.2803 ])
        (mem:DI (reg/f:DI 81) [0 *cid_2+0 S8 A64])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))

;; pthread_join (_15, 0B);

(insn 100 99 101 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))

(insn 101 100 102 (set (reg:DI 5 di)
        (reg:DI 70 [ D.2803 ])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))

(insn 102 101 103 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))

(call_insn 103 102 0 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_join") [flags 0x41]  <function_decl 0x7fa5dd86e400 pthread_join>) [0 pthread_join S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:74 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (nil)))))

;; _16 = 0;

(insn 104 103 0 (set (reg:SI 71 [ D.2802 ])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:75 -1
     (nil))

;; Generating RTL for gimple basic block 9

;; <L6>:

(code_label 105 104 106 12 "" [0 uses])

(note 106 105 0 NOTE_INSN_BASIC_BLOCK)

;; return _16;

(insn 107 106 108 (set (reg:SI 72 [ <retval> ])
        (reg:SI 71 [ D.2802 ])) producer_consumer_problem-seamaphore.c:75 -1
     (nil))

(jump_insn 108 107 109 (set (pc)
        (label_ref 0)) producer_consumer_problem-seamaphore.c:75 -1
     (nil))

(barrier 109 108 0)
deleting block 11


try_optimize_cfg iteration 1

Merging block 3 into block 2...
Merged blocks 2 and 3.
Merged 2 and 3 without moving.
Merging block 10 into block 9...
Merged blocks 9 and 10.
Merged 9 and 10 without moving.
Merging block 11 into block 9...
Merged blocks 9 and 11.
Merged 9 and 11 without moving.


try_optimize_cfg iteration 2



;;
;; Full RTL generated for this function:
;;
(note 1 0 3 NOTE_INSN_DELETED)
;; basic block 2, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 0, next block 4, flags: (NEW, REACHABLE, RTL)
;;  pred:       ENTRY (FALLTHRU)
(note 3 1 2 2 [bb 2] NOTE_INSN_BASIC_BLOCK)
(note 2 3 5 2 NOTE_INSN_FUNCTION_BEG)
(insn 5 2 6 2 (set (reg:DI 5 di)
        (const_int 8 [0x8])) producer_consumer_problem-seamaphore.c:47 -1
     (nil))
(call_insn 6 5 7 2 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:47 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 7 6 8 2 (set (reg/f:DI 73)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:47 -1
     (expr_list:REG_NOALIAS (reg/f:DI 73)
        (nil)))
(insn 8 7 9 2 (set (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -16 [0xfffffffffffffff0])) [0 pid+0 S8 A64])
        (reg/f:DI 73)) producer_consumer_problem-seamaphore.c:47 -1
     (nil))
(insn 9 8 10 2 (set (reg:DI 5 di)
        (const_int 8 [0x8])) producer_consumer_problem-seamaphore.c:48 -1
     (nil))
(call_insn 10 9 11 2 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:48 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 11 10 12 2 (set (reg/f:DI 74)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:48 -1
     (expr_list:REG_NOALIAS (reg/f:DI 74)
        (nil)))
(insn 12 11 13 2 (set (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -8 [0xfffffffffffffff8])) [0 cid+0 S8 A64])
        (reg/f:DI 74)) producer_consumer_problem-seamaphore.c:48 -1
     (nil))
(insn 13 12 14 2 (set (reg:DI 5 di)
        (const_int 32 [0x20])) producer_consumer_problem-seamaphore.c:49 -1
     (nil))
(call_insn 14 13 15 2 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:49 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 15 14 16 2 (set (reg/f:DI 75)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:49 -1
     (expr_list:REG_NOALIAS (reg/f:DI 75)
        (nil)))
(insn 16 15 17 2 (set (reg/f:DI 59 [ empty.24 ])
        (reg/f:DI 75)) producer_consumer_problem-seamaphore.c:49 -1
     (nil))
(insn 17 16 18 2 (set (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])
        (reg/f:DI 59 [ empty.24 ])) producer_consumer_problem-seamaphore.c:49 -1
     (nil))
(insn 18 17 19 2 (set (reg:DI 5 di)
        (const_int 32 [0x20])) producer_consumer_problem-seamaphore.c:50 -1
     (nil))
(call_insn 19 18 20 2 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:50 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 20 19 21 2 (set (reg/f:DI 76)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:50 -1
     (expr_list:REG_NOALIAS (reg/f:DI 76)
        (nil)))
(insn 21 20 22 2 (set (reg/f:DI 60 [ full.25 ])
        (reg/f:DI 76)) producer_consumer_problem-seamaphore.c:50 -1
     (nil))
(insn 22 21 23 2 (set (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])
        (reg/f:DI 60 [ full.25 ])) producer_consumer_problem-seamaphore.c:50 -1
     (nil))
(insn 23 22 24 2 (set (reg:DI 5 di)
        (const_int 32 [0x20])) producer_consumer_problem-seamaphore.c:51 -1
     (nil))
(call_insn 24 23 25 2 (set (reg:DI 0 ax)
        (call (mem:QI (symbol_ref:DI ("malloc") [flags 0x41]  <function_decl 0x7fa5dd73ab00 malloc>) [0 __builtin_malloc S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:51 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 25 24 26 2 (set (reg/f:DI 77)
        (reg:DI 0 ax)) producer_consumer_problem-seamaphore.c:51 -1
     (expr_list:REG_NOALIAS (reg/f:DI 77)
        (nil)))
(insn 26 25 27 2 (set (reg/f:DI 61 [ mutex.26 ])
        (reg/f:DI 77)) producer_consumer_problem-seamaphore.c:51 -1
     (nil))
(insn 27 26 28 2 (set (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])
        (reg/f:DI 61 [ mutex.26 ])) producer_consumer_problem-seamaphore.c:51 -1
     (nil))
(insn 28 27 29 2 (set (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -20 [0xffffffffffffffec])) [0 n+0 S4 A32])
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:55 -1
     (nil))
(insn 29 28 30 2 (set (reg:SI 62 [ n.27 ])
        (mem/c:SI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -20 [0xffffffffffffffec])) [0 n+0 S4 A32])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(insn 30 29 31 2 (set (reg/f:DI 63 [ empty.28 ])
        (mem/f/c:DI (symbol_ref:DI ("empty")  <var_decl 0x7fa5dd841be0 empty>) [0 empty+0 S8 A64])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(insn 31 30 32 2 (set (reg:SI 1 dx)
        (reg:SI 62 [ n.27 ])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(insn 32 31 33 2 (set (reg:SI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(insn 33 32 34 2 (set (reg:DI 5 di)
        (reg/f:DI 63 [ empty.28 ])) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(call_insn 34 33 35 2 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_init") [flags 0x41]  <function_decl 0x7fa5dd863400 sem_init>) [0 sem_init S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:56 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (expr_list:REG_BR_PRED (use (reg:SI 4 si))
            (expr_list:REG_BR_PRED (use (reg:SI 1 dx))
                (nil)))))
(insn 35 34 36 2 (set (reg:SI 64 [ D.2802 ])
        (reg:SI 0 ax)) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(insn 36 35 37 2 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 64 [ D.2802 ])
            (const_int -1 [0xffffffffffffffff]))) producer_consumer_problem-seamaphore.c:56 -1
     (nil))
(jump_insn 37 36 38 2 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 44)
            (pc))) producer_consumer_problem-seamaphore.c:56 -1
     (nil)
 -> 44)
;;  succ:       4 (FALLTHRU)
;;              5

;; basic block 4, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 2, next block 5, flags: (NEW, REACHABLE, RTL)
;;  pred:       2 (FALLTHRU)
(note 38 37 39 4 [bb 4] NOTE_INSN_BASIC_BLOCK)
(insn 39 38 40 4 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC7") [flags 0x2]  <var_decl 0x7fa5dd48d260 *.LC7>)) producer_consumer_problem-seamaphore.c:58 -1
     (nil))
(call_insn 40 39 41 4 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:58 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 41 40 42 4 (set (reg:SI 5 di)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:59 -1
     (nil))
(call_insn 42 41 43 4 (call (mem:QI (symbol_ref:DI ("exit") [flags 0x41]  <function_decl 0x7fa5dd72ef00 exit>) [0 __builtin_exit S1 A8])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:59 -1
     (expr_list:REG_NORETURN (const_int 0 [0])
        (expr_list:REG_EH_REGION (const_int 0 [0])
            (nil)))
    (expr_list:REG_BR_PRED (use (reg:SI 5 di))
        (nil)))
;;  succ:      

(barrier 43 42 44)
;; basic block 5, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 4, next block 6, flags: (NEW, REACHABLE, RTL)
;;  pred:       2
(code_label 44 43 45 5 9 "" [1 uses])
(note 45 44 46 5 [bb 5] NOTE_INSN_BASIC_BLOCK)
(insn 46 45 47 5 (set (reg/f:DI 65 [ full.29 ])
        (mem/f/c:DI (symbol_ref:DI ("full")  <var_decl 0x7fa5dd841c78 full>) [0 full+0 S8 A64])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))
(insn 47 46 48 5 (set (reg:SI 1 dx)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))
(insn 48 47 49 5 (set (reg:SI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))
(insn 49 48 50 5 (set (reg:DI 5 di)
        (reg/f:DI 65 [ full.29 ])) producer_consumer_problem-seamaphore.c:61 -1
     (nil))
(call_insn 50 49 51 5 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_init") [flags 0x41]  <function_decl 0x7fa5dd863400 sem_init>) [0 sem_init S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:61 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (expr_list:REG_BR_PRED (use (reg:SI 4 si))
            (expr_list:REG_BR_PRED (use (reg:SI 1 dx))
                (nil)))))
(insn 51 50 52 5 (set (reg:SI 66 [ D.2802 ])
        (reg:SI 0 ax)) producer_consumer_problem-seamaphore.c:61 -1
     (nil))
(insn 52 51 53 5 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 66 [ D.2802 ])
            (const_int -1 [0xffffffffffffffff]))) producer_consumer_problem-seamaphore.c:61 -1
     (nil))
(jump_insn 53 52 54 5 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 60)
            (pc))) producer_consumer_problem-seamaphore.c:61 -1
     (nil)
 -> 60)
;;  succ:       6 (FALLTHRU)
;;              7

;; basic block 6, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 5, next block 7, flags: (NEW, REACHABLE, RTL)
;;  pred:       5 (FALLTHRU)
(note 54 53 55 6 [bb 6] NOTE_INSN_BASIC_BLOCK)
(insn 55 54 56 6 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC7") [flags 0x2]  <var_decl 0x7fa5dd48d260 *.LC7>)) producer_consumer_problem-seamaphore.c:63 -1
     (nil))
(call_insn 56 55 57 6 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:63 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 57 56 58 6 (set (reg:SI 5 di)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:64 -1
     (nil))
(call_insn 58 57 59 6 (call (mem:QI (symbol_ref:DI ("exit") [flags 0x41]  <function_decl 0x7fa5dd72ef00 exit>) [0 __builtin_exit S1 A8])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:64 -1
     (expr_list:REG_NORETURN (const_int 0 [0])
        (expr_list:REG_EH_REGION (const_int 0 [0])
            (nil)))
    (expr_list:REG_BR_PRED (use (reg:SI 5 di))
        (nil)))
;;  succ:      

(barrier 59 58 60)
;; basic block 7, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 6, next block 8, flags: (NEW, REACHABLE, RTL)
;;  pred:       5
(code_label 60 59 61 7 10 "" [1 uses])
(note 61 60 62 7 [bb 7] NOTE_INSN_BASIC_BLOCK)
(insn 62 61 63 7 (set (reg/f:DI 67 [ mutex.30 ])
        (mem/f/c:DI (symbol_ref:DI ("mutex")  <var_decl 0x7fa5dd841d10 mutex>) [0 mutex+0 S8 A64])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))
(insn 63 62 64 7 (set (reg:SI 1 dx)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))
(insn 64 63 65 7 (set (reg:SI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))
(insn 65 64 66 7 (set (reg:DI 5 di)
        (reg/f:DI 67 [ mutex.30 ])) producer_consumer_problem-seamaphore.c:66 -1
     (nil))
(call_insn 66 65 67 7 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("sem_init") [flags 0x41]  <function_decl 0x7fa5dd863400 sem_init>) [0 sem_init S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:66 -1
     (expr_list:REG_EH_REGION (const_int 0 [0])
        (nil))
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (expr_list:REG_BR_PRED (use (reg:SI 4 si))
            (expr_list:REG_BR_PRED (use (reg:SI 1 dx))
                (nil)))))
(insn 67 66 68 7 (set (reg:SI 68 [ D.2802 ])
        (reg:SI 0 ax)) producer_consumer_problem-seamaphore.c:66 -1
     (nil))
(insn 68 67 69 7 (set (reg:CCZ 17 flags)
        (compare:CCZ (reg:SI 68 [ D.2802 ])
            (const_int -1 [0xffffffffffffffff]))) producer_consumer_problem-seamaphore.c:66 -1
     (nil))
(jump_insn 69 68 70 7 (set (pc)
        (if_then_else (ne (reg:CCZ 17 flags)
                (const_int 0 [0]))
            (label_ref 76)
            (pc))) producer_consumer_problem-seamaphore.c:66 -1
     (nil)
 -> 76)
;;  succ:       8 (FALLTHRU)
;;              9

;; basic block 8, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 7, next block 9, flags: (NEW, REACHABLE, RTL)
;;  pred:       7 (FALLTHRU)
(note 70 69 71 8 [bb 8] NOTE_INSN_BASIC_BLOCK)
(insn 71 70 72 8 (set (reg:DI 5 di)
        (symbol_ref/f:DI ("*.LC7") [flags 0x2]  <var_decl 0x7fa5dd48d260 *.LC7>)) producer_consumer_problem-seamaphore.c:68 -1
     (nil))
(call_insn 72 71 73 8 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("puts") [flags 0x41]  <function_decl 0x7fa5dd71c600 __builtin_puts>) [0 __builtin_puts S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:68 -1
     (nil)
    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
        (nil)))
(insn 73 72 74 8 (set (reg:SI 5 di)
        (const_int 1 [0x1])) producer_consumer_problem-seamaphore.c:69 -1
     (nil))
(call_insn 74 73 75 8 (call (mem:QI (symbol_ref:DI ("exit") [flags 0x41]  <function_decl 0x7fa5dd72ef00 exit>) [0 __builtin_exit S1 A8])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:69 -1
     (expr_list:REG_NORETURN (const_int 0 [0])
        (expr_list:REG_EH_REGION (const_int 0 [0])
            (nil)))
    (expr_list:REG_BR_PRED (use (reg:SI 5 di))
        (nil)))
;;  succ:      

(barrier 75 74 76)
;; basic block 9, loop depth 0, count 0, freq 0, maybe hot
;;  prev block 8, next block 1, flags: (NEW, REACHABLE, RTL, MODIFIED)
;;  pred:       7
(code_label 76 75 77 9 11 "" [1 uses])
(note 77 76 78 9 [bb 9] NOTE_INSN_BASIC_BLOCK)
(insn 78 77 79 9 (set (reg:DI 78)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -16 [0xfffffffffffffff0])) [0 pid+0 S8 A64])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))
(insn 79 78 80 9 (set (reg:DI 2 cx)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))
(insn 80 79 81 9 (set (reg:DI 1 dx)
        (symbol_ref:DI ("producer") [flags 0x3]  <function_decl 0x7fa5dd863e00 producer>)) producer_consumer_problem-seamaphore.c:71 -1
     (nil))
(insn 81 80 82 9 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))
(insn 82 81 83 9 (set (reg:DI 5 di)
        (reg:DI 78)) producer_consumer_problem-seamaphore.c:71 -1
     (nil))
(insn 83 82 84 9 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:71 -1
     (nil))
(call_insn 84 83 85 9 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_create") [flags 0x41]  <function_decl 0x7fa5dd86e300 pthread_create>) [0 pthread_create S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:71 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 1 dx))
                    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 2 cx))
                        (nil)))))))
(insn 85 84 86 9 (set (reg:DI 79)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -8 [0xfffffffffffffff8])) [0 cid+0 S8 A64])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))
(insn 86 85 87 9 (set (reg:DI 2 cx)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))
(insn 87 86 88 9 (set (reg:DI 1 dx)
        (symbol_ref:DI ("consumer") [flags 0x3]  <function_decl 0x7fa5dd863f00 consumer>)) producer_consumer_problem-seamaphore.c:72 -1
     (nil))
(insn 88 87 89 9 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))
(insn 89 88 90 9 (set (reg:DI 5 di)
        (reg:DI 79)) producer_consumer_problem-seamaphore.c:72 -1
     (nil))
(insn 90 89 91 9 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:72 -1
     (nil))
(call_insn 91 90 92 9 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_create") [flags 0x41]  <function_decl 0x7fa5dd86e300 pthread_create>) [0 pthread_create S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:72 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 1 dx))
                    (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 2 cx))
                        (nil)))))))
(insn 92 91 93 9 (set (reg/f:DI 80)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -16 [0xfffffffffffffff0])) [0 pid+0 S8 A64])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))
(insn 93 92 94 9 (set (reg:DI 69 [ D.2803 ])
        (mem:DI (reg/f:DI 80) [0 *pid_1+0 S8 A64])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))
(insn 94 93 95 9 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))
(insn 95 94 96 9 (set (reg:DI 5 di)
        (reg:DI 69 [ D.2803 ])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))
(insn 96 95 97 9 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:73 -1
     (nil))
(call_insn 97 96 98 9 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_join") [flags 0x41]  <function_decl 0x7fa5dd86e400 pthread_join>) [0 pthread_join S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:73 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (nil)))))
(insn 98 97 99 9 (set (reg/f:DI 81)
        (mem/f/c:DI (plus:DI (reg/f:DI 54 virtual-stack-vars)
                (const_int -8 [0xfffffffffffffff8])) [0 cid+0 S8 A64])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))
(insn 99 98 100 9 (set (reg:DI 70 [ D.2803 ])
        (mem:DI (reg/f:DI 81) [0 *cid_2+0 S8 A64])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))
(insn 100 99 101 9 (set (reg:DI 4 si)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))
(insn 101 100 102 9 (set (reg:DI 5 di)
        (reg:DI 70 [ D.2803 ])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))
(insn 102 101 103 9 (set (reg:QI 0 ax)
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:74 -1
     (nil))
(call_insn 103 102 104 9 (set (reg:SI 0 ax)
        (call (mem:QI (symbol_ref:DI ("pthread_join") [flags 0x41]  <function_decl 0x7fa5dd86e400 pthread_join>) [0 pthread_join S1 A8])
            (const_int 0 [0]))) producer_consumer_problem-seamaphore.c:74 -1
     (nil)
    (expr_list:REG_DEP_TRUE (use (reg:QI 0 ax))
        (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 5 di))
            (expr_list:REG_FRAME_RELATED_EXPR (use (reg:DI 4 si))
                (nil)))))
(insn 104 103 107 9 (set (reg:SI 71 [ D.2802 ])
        (const_int 0 [0])) producer_consumer_problem-seamaphore.c:75 -1
     (nil))
(insn 107 104 111 9 (set (reg:SI 72 [ <retval> ])
        (reg:SI 71 [ D.2802 ])) producer_consumer_problem-seamaphore.c:75 -1
     (nil))
(insn 111 107 114 9 (set (reg/i:SI 0 ax)
        (reg:SI 72 [ <retval> ])) producer_consumer_problem-seamaphore.c:76 -1
     (nil))
(insn 114 111 0 9 (use (reg/i:SI 0 ax)) producer_consumer_problem-seamaphore.c:76 -1
     (nil))
;;  succ:       EXIT [100.0%]  (FALLTHRU)

